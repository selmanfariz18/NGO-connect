<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>{{user.username}}|NGO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css"
  />
    <style>
      .notification-icon {
          position: relative;
          display: inline-block;
      }

      .badge {
          position: absolute;
          top: -10px;
          right: -12px;
          background-color: red;
          color: white;
          border-radius: 50%;
          padding: 2px 6px;
          font-size: 10px;
          height: 25px;
      }
      .alert {
        text-align: center;
        background-color: rgba(0, 0, 0, 0.8);
        border-radius: 5px;
        width: 400px;
        height: 35px;
        margin-left: auto;
        margin-right: auto;
        font-size: 16px;
        font-weight: 300;
        padding: 10px;
      }
      .alert-good {
        color: white;
      }
      .good-i {
        color: green;
        margin-top: auto;
        margin-bottom: auto;
        font-size: 20px;
        margin-bottom: 12px;
      }
      .error-i {
        color: red;
        margin-top: auto;
        margin-bottom: auto;
        font-size: 20px;
        margin-bottom: 12px;
      }
      .info-i {
        color: orangered;
        margin-top: auto;
        margin-bottom: auto;
        font-size: 20px;
        margin-bottom: 12px;
      }
      .bi {
        vertical-align: 0.125em;
        width: 1em;
        height: 1em;
      }
    </style>
</head>
<body class="font-sans" style="background-image: url('data:image/jpeg;base64,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'); 
            background-size: cover;
            background-position: center;" >
            
            
<header
    class="lg:px-16 px-4 bg-white flex flex-wrap items-center py-4 shadow-md"
>
    <div class="flex-1 flex justify-between items-center">
      <a href="#" class="text-xl">NGO-Connect <p class="text-sm">{{ user.first_name }}</p></a>
    </div>

    <label for="menu-toggle" class="pointer-cursor lg:hidden block">
        <svg
            class="fill-current text-gray-900"
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
        >
            <title>menu</title>
            <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
        </svg>
    </label>
    <input class="hidden" type="checkbox" id="menu-toggle"/>

    <div class="hidden lg:flex lg:items-center lg:w-auto w-full" id="menu">
        <nav>
            <ul
                class="lg:flex items-center justify-between text-base text-gray-700 pt-4 lg:pt-0"
            >
            <li>
              <a class="md:p-4 py-3 px-0 block" href="/ngo/ngo_balance_sheet">Balance: â‚¹{{bank.current_balance}}</a>
            </li>
            <li class="relative">
              <a href="#" class="px-2" id="notificationButton">
                <div class="notification-icon">
                    <i class="fas fa-bell fa-2x"></i> <!-- Replace with your preferred icon -->
                    <span class="badge">{{ notification_count }}</span>
                </div>
              </a>
              <!-- Dropdown Menu -->
              <div class="absolute right-0 mt-2 w-56 bg-white shadow-xl hidden" id="notificationDropdown">
                <!-- Horizontal Card 1 -->
                {% for i in notifications %}
                <div class="flex justify-between items-start p-4 border-b border-gray-200">
                  <div class="flex-grow">
                    <form action="">
                      <h6 class="text-sm font-semibold text-gray-700">{{ i.name }}</h6>
                      <p class="text-xs text-gray-600">{{ i.desc }}</p>
                    </form>
                  </div>
                  <div>
                    <form method="post" action="/ngo/dlt_notification">
                      {% csrf_token %}
                      <input type="hidden" name="id" value="{{ i.id }}">
                      <button class="text-gray-400 hover:text-gray-500" type="submit">
                        <i class="fas fa-trash"></i>
                      </button>
                    </form>
                  </div>
                </div>
                {% endfor %}
                <!-- Horizontal Card 2 --> 
              </div>
            </li>
                <li><a class="lg:p-4 py-3 rounded-md px-0 mx-1 block hover:bg-blue-300" href="/ngo/ngo_all_users">All Users</a></li>
                <li><a class="lg:p-4 py-3 rounded-md px-0 mx-1 block hover:bg-blue-300" href="/ngo/ngo_donor_users">Contributers</a></li>
                <li><a class="lg:p-4 py-3 rounded-md px-0 mx-1 block hover:bg-blue-300" href="/ngo/ngo_profile_page"><i class="fa fa-user" aria-hidden="true"></i></a></li>
                <li><a class="lg:p-4 py-3 rounded-md bg-orange-200 px-0 mx-1 block hover:bg-red-500" href="/logout"><i class="fa fa-sign-out" aria-hidden="true"></i></a></li>
            </ul>
        </nav>
    </div>
</header>

      <!--Alert area-->
      <div class="form-group row mt-6">
        {% for message in messages %} {% if message.tags == 'success' %}
        <div class="alert alert-good h-14" role="alert">
          <i class="bi bi-check-circle good-i"></i>
          {{message}}
        </div>
        {% elif message.tags == 'error' %}
        <div class="alert alert-good h-14" role="alert">
          <i class="bi bi-hexagon-fill error-i"></i>
          {{message}}
        </div>
        {% elif message.tags == 'info' %}
        <div class="alert alert-good h-14" role="alert">
          <i class="bi bi-exclamation-triangle info-i"></i>
          {{message}}
        </div>
        {% else %}
        <div class="alert h-14" role="alert">{{message}}</div>
        {% endif %} {% endfor %}
      
      </div>
      <!--Alert area ends-->


{% if balance.is_balance_defined == False %}
<section id="reciver_type" class="flex justify-center items-center">
  <div class="container my-3 mx-auto flex justify-center text-center">
    <form action="/ngo/balance_sett" method="POST" class="flex flex-col items-center p-4 bg-green-100 rounded-lg w-80">
        {% csrf_token %}
      <div class="flex flex-col p-4 space-y-2 bg-green-100 rounded-lg w-80">
        <div class="flex items-center py-3">
          <p class="ml-2 text-sm font-medium text-black-900 dark:text-black-300" >Bank balance:</p>
          <input type="number" name="bank_balance" id="" placeholder="Bank Balance" required class="ml-2 p-1.5 text-sm border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500"/>
        </div>
      </div>
      <button type="submit" class="bg-blue-100" id="submit">Submit</button>
    </form>
  </div>
</section>
{% endif %}



{% if ngo_request_count %}
<section id="request_btn">
  <div class="text-center">
    <div class="mt-4 w-24 h-auto mx-auto bg-slate-600 rounded-lg">
      <a href="/ngo/ngo_join_request">View all request</a>
    </div>
  </div>
</section>
{% endif %}

<!-- section to view donation request from receivers -->
{% if reciever_requests %}
<section class="text-center my-6 mx-4">
  <div class="items-center rounded-lg shadow-md p-3 my-3 justify-center align-middle">
    <p class="text-2xl">Donation Requests</p>
    {% for request in reciever_requests %}
    {% if request.status == 'pending' %}
    <div class="bg-lime-100 rounded-lg shadow-md p-3 my-3 mx-auto w-3/4">
      <ul class="mt-3">
        <li class="text-left font-semibold">NAME: {{request.from_user.first_name}} </li>
        {% if request.is_money_needed == True %}
          <li class="text-left">AMOUNT: â‚¹{{ request.amount }}</li>
        {% else %}
          <li class="text-left">Goods Name: {{ request.goods_name }}</li>
          <li class="text-left">Count: {{ request.count }}</li>
        {% endif %}
        <!-- <li class="text-left">Type:  </li>
        <li class="text-left">Status: </li>
        <li class="text-left">ADDRESS:{{request.from_user.address}} </li>
        <li class="text-left">PINCODE: </li> -->
      </ul>
      <div class="flex justify-around">     
        <form method="post" action="/ngo/accept_donation_request">
            {% csrf_token %}
            <input type="hidden" name="to_user" value="{{ request.from_user }}">
            <input type="hidden" name="id" value="{{ request.id }}">
            {% if request.is_money_needed == True %}
              <input type="hidden" name="amount" value="{{ request.amount }}">
            {% else %}
              <input type="hidden" name="goods_name" value="{{ request.goods_name }}">
              <input type="hidden" name="count" value="{{ request.count }}">
            {% endif %}
            <!-- <p>{{ item.ngo.user }}</p> -->
            <button type="submit" class="my-3 px-3 bg-green-500 rounded-lg">Accept</button>
        </form>
        <form method="post" action="/ngo/reject_donation_request">
          {% csrf_token %}          
          <input type="hidden" name="id" value="{{ request.id }}">
          <input type="hidden" name="to_user" value="{{ request.from_user }}">         
          <button type="submit" class="my-3 px-3 bg-red-500 rounded-lg">Reject</button>
        </form>
      </div>
    </div>  
    {% endif %}
    {% endfor %}
  </div>
</section>
{% endif %}
<!-- donation request section end -->


<section class="text-center my-6 mx-4">
    <div class="flex flex-col lg:grid lg:grid-cols-3 gap-3 justify-around rounded-lg shadow-md p-3 my-3">


      {% if ngo_request_orphanage_count != 0 %}
        <div class="bg-lime-300/75 rounded-lg shadow-md p-3 my-3">
            <h2 class="text-xl font-bold">Orphanages</h2>
          {% for user in users %} {% for detail in user_details %} {% if detail.user == user %}
          {% if detail.user_type == "Receiver" %}
          {% for r in reciever %}
          {% if r.user == user and r.reciever_type == 'orphanage' %}
          {% for i in reciever_ngo %}
          {% if i.reciever == user and i.user == me and i.status == 'accepted' %}
          <div class="shadow-md shadow-blue-300 p-3 my-3 bg-lime-100 rounded-lg">
            <ul class="mt-3">
              <li class="text-base font-semibold">
              
              </li>
              <li class="text-left">EMAIL: {{ user.username }}</li>
              <li class="text-left">NAME: {{ user.first_name }}</li>
              <li class="text-left">Type: {{ r.reciever_type }} </li>
              <li class="text-left">Status: {{ i.status }} </li>
              <li class="text-left">ADDRESS: {{ detail.address }}</li>
              <li class="text-left">PINCODE: {{ detail.pincode }}</li>
              {% for bal in reciever_bank %}
              {% if bal.user == detail.user %}
                <li class="text-left">AMOUNT: â‚¹{{ bal.current_balance }}</li>
              {% endif %}
              {% endfor %}
            </ul>
            <div class="flex justify-around">     
              <form method="post" action="/ngo/ngo_donate_btn_request">
                  {% csrf_token %}
                  <input type="hidden" name="id" value="{{ detail.id }}">
                  <!-- <p>{{ item.ngo.user }}</p> -->
                  <button type="submit" class="my-3 px-3 bg-green-500 rounded-lg">Donate</button>
              </form>
            </div>
          </div>       
          {% endif %}
          {% endfor %}
          {% endif %}
          {% endfor %}
          {% endif %}
          {% endif %} {% endfor %} {% endfor %}
        </div>
      {% endif %}
      

    {% if ngo_request_oah_count != 0 %}
        <div class="bg-lime-300/75 rounded-lg shadow-md p-3 my-3">
          <h2 class="text-xl font-bold">OAH</h2>
          {% for user in users %} {% for detail in user_details %} {% if detail.user == user %}
          {% if detail.user_type == "Receiver" %}
          {% for r in reciever %}
          {% if r.user == user and r.reciever_type == 'OAH' %}
          {% for i in reciever_ngo %}
          {% if i.reciever == user and i.user == me and i.status == 'accepted' %}
          <div class="shadow-md shadow-blue-300 p-3 my-3 bg-lime-100 rounded-lg">
            <ul class="mt-3">
              <li class="text-base font-semibold">
              
              </li>
              <li class="text-left">EMAIL: {{ user.username }}</li>
              <li class="text-left">NAME: {{ user.first_name }}</li>
              <li class="text-left">Type: {{ r.reciever_type }} </li>
              <li class="text-left">Status: {{ i.status }} </li>
              <li class="text-left">ADDRESS: {{ detail.address }}</li>
              <li class="text-left">PINCODE: {{ detail.pincode }}</li>
              {% for bal in reciever_bank %}
              {% if bal.user == detail.user %}
                <li class="text-left">AMOUNT: â‚¹{{ bal.current_balance }}</li>
              {% endif %}
              {% endfor %}
            </ul>
            <div class="flex justify-around">     
              <form method="post" action="/ngo/ngo_donate_btn_request">
                  {% csrf_token %}
                  <input type="hidden" name="id" value="{{ detail.id }}">
                  <!-- <p>{{ item.ngo.user }}</p> -->
                  <button type="submit" class="my-3 px-3 bg-green-500 rounded-lg">Donate</button>
              </form>
            </div>
          </div>
          {% endif %}
          {% endfor %}
          {% endif %}
          {% endfor %}
          {% endif %}
          {% endif %} {% endfor %} {% endfor %}
        </div>
        {% endif %}


      {% if ngo_request_non_oah_orphanage_count != 0 %}
        <div class="bg-lime-300/75 rounded-lg shadow-md p-3 my-3">
          <h2 class="text-xl font-bold">Other Recivers</h2>
        {% for user in users %} {% for detail in user_details %} {% if detail.user == user %}
        {% if detail.user_type == "Receiver" %}
        {% for r in reciever %}
        {% if r.user == user and r.reciever_type != 'OAH' and r.reciever_type != 'orphanage' %}
        {% for i in reciever_ngo %}
        {% if i.reciever == user and i.user == me and i.status == 'accepted' %}
        <div class="shadow-md shadow-blue-300 p-3 my-3 bg-lime-100 rounded-lg">
          <ul class="mt-3">
            <li class="text-base font-semibold">
            
            </li>
            <li class="text-left">EMAIL: {{ i.user.username }}</li>
            <li class="text-left">NAME: {{ i.user.first_name }}</li>
            <li class="text-left">Type: {{ r.reciever_type }} </li>
            <li class="text-left">Status: {{ i.status }} </li>
            <li class="text-left">ADDRESS: {{ detail.address }}</li>
            <li class="text-left">PINCODE: {{ detail.pincode }}</li>
            {% for bal in reciever_bank %}
            {% if bal.user == detail.user %}
              <li class="text-left">AMOUNT: â‚¹{{ bal.current_balance }}</li>
            {% endif %}
            {% endfor %}
          </ul>
          <div class="flex justify-around">     
            <form method="post" action="/ngo/ngo_donate_btn_request">
                {% csrf_token %}
                <input type="hidden" name="id" value="{{ detail.id }}">
                <!-- <p>{{ item.ngo.user }}</p> -->
                <button type="submit" class="my-3 px-3 bg-green-500 rounded-lg">Donate</button>
            </form>
          </div>
        </div>
        {% endif %}
        {% endfor %}
        {% endif %}
        {% endfor %}
        {% endif %}
        {% endif %} {% endfor %} {% endfor %}
      </div>
    {% endif %}
      </div>
    </section>

    <script>
      document
        .getElementById("menu-toggle")
        .addEventListener("change", function () {
          var menu = document.getElementById("menu");
          if (this.checked) {
            // When the checkbox is checked, show the menu
            menu.classList.remove("hidden");
            menu.classList.add("block");
          } else {
            // When the checkbox is not checked, hide the menu
            menu.classList.add("hidden");
            menu.classList.remove("block");
          }
        });
    </script>
    <script>
      // Simple JavaScript to toggle the dropdown visibility
      document.getElementById('notificationButton').addEventListener('click', function(event) {
        event.preventDefault();
        var dropdown = document.getElementById('notificationDropdown');
        if (dropdown.classList.contains('hidden')) {
          dropdown.classList.remove('hidden');
        } else {
          dropdown.classList.add('hidden');
        }
      });
    </script>
  </body>
</html>