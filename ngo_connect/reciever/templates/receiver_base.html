<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{user.username}}|NGO</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body style="font-family: sans-serif">
    <header
      class="lg:px-16 px-4 bg-white flex flex-wrap items-center py-4 shadow-md"
    >
      <div class="flex-1 flex justify-between items-center">
        <a href="#" class="text-xl">NGO-Connect</a>
      </div>

      <label for="menu-toggle" class="pointer-cursor md:hidden block">
        <svg
          class="fill-current text-gray-900"
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 20 20"
        >
          <title>menu</title>
          <path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"></path>
        </svg>
      </label>
      <input class="hidden" type="checkbox" id="menu-toggle" />

      <div class="hidden md:flex md:items-center md:w-auto w-full" id="menu">
        <nav>
          <ul
            class="md:flex items-center justify-between text-base text-gray-700 pt-4 md:pt-0"
          >
            <li class="hover:bg-violet-600">
              <a class="md:p-4 py-3 px-0 block" href="#">Contributers</a>
            </li>
            <li><a class="md:p-4 py-3 px-0 block" href="#">Settings</a></li>
            <li>
              <a class="md:p-4 py-3 px-0 block md:mb-0 mb-2" href="/logout"
                >Logout</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>

    {% if reciever.is_reciever_type_defined == True %}
    <div class="px-5">
      <h2>Hai {% if reciever.reciver_type == 'OAH' %} Old age home {% else %} {{ reciever.reciever_type }} {% endif %}</h2>
    </div>
    {% endif %}

    {% if reciever.is_reciever_type_defined == False %}
    <section id="reciver_type">
      <form action="/reciever/reciever_type" method="POST" class="form-horizontal">
        {% csrf_token %}
      <div class="flex flex-col p-4 space-y-2 bg-gray-100 rounded-lg">
        <div class="flex items-center">
          <input type="radio" value="OAH" name="options" id="old-age-home" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600" />
          <label for="old-age-home" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">OLD age home</label>
        </div>
        <div class="flex items-center">
          <input type="radio" value="orphanage" name="options" id="orphanage" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600" />
          <label for="orphanage" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Orphanage</label>
        </div>
        <div class="flex items-center">
          <input type="radio" value="other" name="options" id="other" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600" onclick="toggleInput(true)" />
          <label for="other" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Other:</label>
          <input type="text" name="other_value" id="other-input" placeholder="Other" class="ml-2 p-1.5 text-sm border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 hidden" onfocus="this.previousElementSibling.checked=true"/>
        </div>
      </div>
      <button type="submit" class="bg-blue-100" id="submit">Submit</button>
    </form>
    </section>
    {% endif %}

    {% if reciever.is_reciever_type_defined == True %}
    <section id="reciever_ngo">
      {% if ngo.status == None or ngo.status == 'rejected' %}
      <div class="container text-center my-3 mx-auto">
        {% if ngo.status == 'rejected' %}
        <h3>Rejected by {{ ngo.user.first_name }}</h3>
        {% endif %}
        <h3>Join with any NGO</h3>

        <div class="form-group my-3">
          <form action="/reciever/reciever_ngo" method="POST" class="form-horizontal">
              {% csrf_token %}
              <select id="inputState" class="form-control bg-blue-200" name="reciever_ngo">
                  <option selected value="Active">Select NGO</option>
                  {% for user in users %}
                      {% if user.user_type == 'NGO' %}
                          <option value="{{ user.user.username }}">{{ user.user.first_name }}</option>
                      {% endif %}
                  {% endfor %}
              </select>
              <button type="submit" class="bg-blue-100" id="submitButton" disabled>Submit</button>
          </form>
        </div>    
  
      </div>
      {% elif ngo.status == 'pending' %}
      <div class="container text-center my-3 mx-auto">
        <h2>request in pending</h2>
      </div>
      {% endif %}
    </section>

    
    {{ ngo.status }}
    {% endif %}

    <script>
      document
        .getElementById("menu-toggle")
        .addEventListener("change", function () {
          var menu = document.getElementById("menu");
          if (this.checked) {
            // When the checkbox is checked, show the menu
            menu.classList.remove("hidden");
            menu.classList.add("block");
          } else {
            // When the checkbox is not checked, hide the menu
            menu.classList.add("hidden");
            menu.classList.remove("block");
          }
        });
    </script>
    <!-- script to handle submit button reciever_ngo -->
    <script>
      document.getElementById('inputState').addEventListener('change', function() {
          var submitButton = document.getElementById('submitButton');
          var selectedValue = this.value;
          
          // Enable the submit button if a valid option is selected, otherwise disable it.
          if(selectedValue !== "Active") {
              submitButton.disabled = false;
          } else {
              submitButton.disabled = true;
          }
      });
    </script>

<script>
  function toggleInput(show) {
    const input = document.getElementById('other-input');
    if (show) {
      input.classList.remove('hidden');
      input.focus();
    } else {
      input.classList.add('hidden');
    }
  }
  // Hide the input field initially if 'Other' is not selected
  document.querySelectorAll('input[type="radio"][name="options"]').forEach(radio => {
    radio.addEventListener('change', () => {
      const isOtherSelected = document.getElementById('other').checked;
      toggleInput(isOtherSelected);
    });
  });
  </script>
    
  </body>
</html>
